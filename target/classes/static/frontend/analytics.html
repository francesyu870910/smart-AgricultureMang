<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®åˆ†æ - æ™ºèƒ½æ¸©å®¤ç›‘æ§ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/components.css">
    <style>
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .nav {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .nav a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .nav a:hover, .nav a.active {
            background: rgba(255,255,255,0.2);
        }
        
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .analytics-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
        }
        
        .card-icon {
            font-size: 24px;
            margin-right: 10px;
        }
        
        .metric-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .metric-label {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .trend-indicator {
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .trend-up {
            color: #28a745;
        }
        
        .trend-down {
            color: #dc3545;
        }
        
        .trend-stable {
            color: #6c757d;
        }
        
        .temp-card .metric-value { color: #FF6B6B; }
        .humidity-card .metric-value { color: #4ECDC4; }
        .light-card .metric-value { color: #FFE66D; }
        .efficiency-card .metric-value { color: #A8E6CF; }
        
        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }
        
        .time-selector {
            display: flex;
            gap: 10px;
        }
        
        .time-btn {
            padding: 6px 12px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .time-btn.active {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        .chart-placeholder {
            height: 300px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 16px;
            flex-direction: column;
        }
        
        .controls {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .control-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #4CAF50;
            color: white;
        }
        
        .btn-primary:hover {
            background: #45a049;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .report-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .report-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .report-item:last-child {
            border-bottom: none;
        }
        
        .report-label {
            font-weight: 500;
            color: #333;
        }
        
        .report-value {
            color: #666;
        }
        
        .progress-bar {
            width: 100px;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-left: 15px;
        }
        
        .progress-fill {
            height: 100%;
            background: #4CAF50;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>æ•°æ®åˆ†æ</h1>
            <nav class="nav">
                <a href="/dashboard.html">è¿”å›é¦–é¡µ</a>
                <a href="environment.html">ç¯å¢ƒç›‘æ§</a>
                <a href="devices.html">è®¾å¤‡æ§åˆ¶</a>
                <a href="alerts.html">æŠ¥è­¦ç®¡ç†</a>
                <a href="analytics.html" class="active">æ•°æ®åˆ†æ</a>
            </nav>
        </header>

        <!-- å…³é”®æŒ‡æ ‡ -->
        <div class="analytics-grid">
            <div class="analytics-card temp-card">
                <div class="card-title">
                    <span class="card-icon">ğŸŒ¡ï¸?/span>
                    å¹³å‡æ¸©åº¦
                </div>
                <div class="metric-value" id="avgTemp">23.5Â°C</div>
                <div class="metric-label">è¿‡å»24å°æ—¶</div>
                <div class="trend-indicator trend-up">
                    â†?+1.2Â°C æ¯”æ˜¨å¤?
                </div>
            </div>
            
            <div class="analytics-card humidity-card">
                <div class="card-title">
                    <span class="card-icon">ğŸ’§</span>
                    å¹³å‡æ¹¿åº¦
                </div>
                <div class="metric-value" id="avgHumidity">65.8%</div>
                <div class="metric-label">è¿‡å»24å°æ—¶</div>
                <div class="trend-indicator trend-down">
                    â†?-2.3% æ¯”æ˜¨å¤?
                </div>
            </div>
            
            <div class="analytics-card light-card">
                <div class="card-title">
                    <span class="card-icon">â˜€ï¸?/span>
                    å…‰ç…§æ—¶é•¿
                </div>
                <div class="metric-value" id="lightHours">14.2h</div>
                <div class="metric-label">ä»Šæ—¥æœ‰æ•ˆå…‰ç…§</div>
                <div class="trend-indicator trend-stable">
                    â†?ä¸æ˜¨å¤©æŒå¹?
                </div>
            </div>
            
            <div class="analytics-card efficiency-card">
                <div class="card-title">
                    <span class="card-icon">âš?/span>
                    ç³»ç»Ÿæ•ˆç‡
                </div>
                <div class="metric-value" id="efficiency">92.5%</div>
                <div class="metric-label">ç»¼åˆè¿è¡Œæ•ˆç‡</div>
                <div class="trend-indicator trend-up">
                    â†?+3.1% æ¯”æ˜¨å¤?
                </div>
            </div>
        </div>

        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="controls">
            <h2 style="margin-bottom: 20px;">åˆ†æå·¥å…·</h2>
            <div class="control-buttons">
                <button class="btn btn-primary" onclick="refreshAnalytics()">åˆ·æ–°æ•°æ®</button>
                <button class="btn btn-primary" onclick="generateReport()">ç”ŸæˆæŠ¥å‘Š</button>
                <button class="btn btn-secondary" onclick="exportData()">å¯¼å‡ºæ•°æ®</button>
                <button class="btn btn-secondary" onclick="showPrediction()">è¶‹åŠ¿é¢„æµ‹</button>
            </div>
        </div>

        <!-- è¶‹åŠ¿å›¾è¡¨ -->
        <div class="chart-container">
            <div class="chart-header">
                <div class="chart-title">ç¯å¢ƒå‚æ•°è¶‹åŠ¿</div>
                <div class="time-selector">
                    <button class="time-btn" onclick="changeTimeRange('1h')">1å°æ—¶</button>
                    <button class="time-btn" onclick="changeTimeRange('6h')">6å°æ—¶</button>
                    <button class="time-btn active" onclick="changeTimeRange('24h')">24å°æ—¶</button>
                    <button class="time-btn" onclick="changeTimeRange('7d')">7å¤?/button>
                    <button class="time-btn" onclick="changeTimeRange('30d')">30å¤?/button>
                </div>
            </div>
            <div class="chart-placeholder">
                ğŸ“ˆ ç¯å¢ƒå‚æ•°è¶‹åŠ¿å›?
                <br>
                <small>æ˜¾ç¤ºæ¸©åº¦ã€æ¹¿åº¦ã€å…‰ç…§ç­‰å‚æ•°çš„å†å²è¶‹åŠ?/small>
            </div>
        </div>

        <!-- è®¾å¤‡ä½¿ç”¨åˆ†æ -->
        <div class="chart-container">
            <div class="chart-header">
                <div class="chart-title">è®¾å¤‡ä½¿ç”¨åˆ†æ</div>
            </div>
            <div class="chart-placeholder">
                ğŸ“Š è®¾å¤‡è¿è¡Œæ—¶é—´ç»Ÿè®¡
                <br>
                <small>æ˜¾ç¤ºå„è®¾å¤‡çš„è¿è¡Œæ—¶é—´å’Œä½¿ç”¨é¢‘ç?/small>
            </div>
        </div>

        <!-- æ€§èƒ½æŠ¥å‘Š -->
        <div class="report-section">
            <h2 style="margin-bottom: 20px;">æ€§èƒ½æŠ¥å‘Š</h2>
            
            <div class="report-item">
                <div class="report-label">æ¸©åº¦æ§åˆ¶ç²¾åº¦</div>
                <div style="display: flex; align-items: center;">
                    <span class="report-value">95.2%</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 95.2%"></div>
                    </div>
                </div>
            </div>
            
            <div class="report-item">
                <div class="report-label">æ¹¿åº¦æ§åˆ¶ç²¾åº¦</div>
                <div style="display: flex; align-items: center;">
                    <span class="report-value">88.7%</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 88.7%"></div>
                    </div>
                </div>
            </div>
            
            <div class="report-item">
                <div class="report-label">è®¾å¤‡å“åº”é€Ÿåº¦</div>
                <div style="display: flex; align-items: center;">
                    <span class="report-value">92.1%</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 92.1%"></div>
                    </div>
                </div>
            </div>
            
            <div class="report-item">
                <div class="report-label">èƒ½è€—æ•ˆç?/div>
                <div style="display: flex; align-items: center;">
                    <span class="report-value">89.5%</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 89.5%"></div>
                    </div>
                </div>
            </div>
            
            <div class="report-item">
                <div class="report-label">ç³»ç»Ÿç¨³å®šæ€?/div>
                <div style="display: flex; align-items: center;">
                    <span class="report-value">96.8%</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 96.8%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¼˜åŒ–å»ºè®® -->
        <div class="report-section">
            <h2 style="margin-bottom: 20px;">ä¼˜åŒ–å»ºè®®</h2>
            
            <div class="report-item">
                <div class="report-label">ğŸ’¡ æ¸©åº¦æ§åˆ¶ä¼˜åŒ–</div>
                <div class="report-value">å»ºè®®åœ¨å¤œé—´é€‚å½“é™ä½ç›®æ ‡æ¸©åº¦ï¼Œå¯èŠ‚èƒ½15%</div>
            </div>
            
            <div class="report-item">
                <div class="report-label">ğŸ’§ æ¹¿åº¦ç®¡ç†æ”¹è¿›</div>
                <div class="report-value">å¢åŠ æ¹¿åº¦ä¼ æ„Ÿå™¨æ•°é‡ï¼Œæé«˜æ§åˆ¶ç²¾åº¦</div>
            </div>
            
            <div class="report-item">
                <div class="report-label">âš?èƒ½è€—ä¼˜åŒ?/div>
                <div class="report-value">ä¼˜åŒ–è®¾å¤‡å¯åœç­–ç•¥ï¼Œé¢„è®¡å¯é™ä½èƒ½è€?2%</div>
            </div>
            
            <div class="report-item">
                <div class="report-label">ğŸ”§ è®¾å¤‡ç»´æŠ¤</div>
                <div class="report-value">é£æ‰‡FAN_003éœ€è¦ç»´æŠ¤ï¼Œå»ºè®®æœ¬å‘¨å†…å¤„ç?/div>
            </div>
        </div>
    </div>

    <script>
        // APIåŸºç¡€URL
        const API_BASE = 'http://localhost:8083/api';
        
        let currentTimeRange = '24h';
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            refreshAnalytics();
            // æ¯?åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°
            setInterval(refreshAnalytics, 5 * 60 * 1000);
        });

        // åˆ·æ–°åˆ†ææ•°æ®
        async function refreshAnalytics() {
            try {
                showLoading('æ­£åœ¨åˆ·æ–°åˆ†ææ•°æ®...');
                
                // æ¨¡æ‹ŸAPIè°ƒç”¨
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // æ›´æ–°å…³é”®æŒ‡æ ‡
                updateMetrics();
                
                showSuccess('åˆ†ææ•°æ®å·²åˆ·æ–?);
                
            } catch (error) {
                console.error('åˆ·æ–°åˆ†ææ•°æ®å¤±è´¥:', error);
                showError('åˆ·æ–°å¤±è´¥ï¼Œè¯·é‡è¯•');
            }
        }

        // æ›´æ–°å…³é”®æŒ‡æ ‡
        function updateMetrics() {
            // æ¨¡æ‹Ÿæ•°æ®å˜åŒ–
            const baseTemp = 23.5;
            const baseHumidity = 65.8;
            const baseLightHours = 14.2;
            const baseEfficiency = 92.5;
            
            const tempVariation = (Math.random() - 0.5) * 2;
            const humidityVariation = (Math.random() - 0.5) * 5;
            const lightVariation = (Math.random() - 0.5) * 1;
            const efficiencyVariation = (Math.random() - 0.5) * 3;
            
            document.getElementById('avgTemp').textContent = (baseTemp + tempVariation).toFixed(1) + 'Â°C';
            document.getElementById('avgHumidity').textContent = (baseHumidity + humidityVariation).toFixed(1) + '%';
            document.getElementById('lightHours').textContent = (baseLightHours + lightVariation).toFixed(1) + 'h';
            document.getElementById('efficiency').textContent = (baseEfficiency + efficiencyVariation).toFixed(1) + '%';
        }

        // æ”¹å˜æ—¶é—´èŒƒå›´
        function changeTimeRange(range) {
            currentTimeRange = range;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€?
            document.querySelectorAll('.time-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            showSuccess(`å·²åˆ‡æ¢åˆ°${range}æ—¶é—´èŒƒå›´`);
        }

        // ç”ŸæˆæŠ¥å‘Š
        async function generateReport() {
            try {
                showLoading('æ­£åœ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š...');
                
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const reportData = {
                    ç”Ÿæˆæ—¶é—´: new Date().toLocaleString(),
                    æ—¶é—´èŒƒå›´: currentTimeRange,
                    å¹³å‡æ¸©åº¦: document.getElementById('avgTemp').textContent,
                    å¹³å‡æ¹¿åº¦: document.getElementById('avgHumidity').textContent,
                    å…‰ç…§æ—¶é•¿: document.getElementById('lightHours').textContent,
                    ç³»ç»Ÿæ•ˆç‡: document.getElementById('efficiency').textContent,
                    æ¸©åº¦æ§åˆ¶ç²¾åº¦: '95.2%',
                    æ¹¿åº¦æ§åˆ¶ç²¾åº¦: '88.7%',
                    è®¾å¤‡å“åº”é€Ÿåº¦: '92.1%',
                    èƒ½è€—æ•ˆç? '89.5%',
                    ç³»ç»Ÿç¨³å®šæ€? '96.8%'
                };
                
                const csv = convertToCSV([reportData]);
                downloadCSV(csv, `analytics_report_${new Date().toISOString().split('T')[0]}.csv`);
                
                showSuccess('åˆ†ææŠ¥å‘Šå·²ç”Ÿæˆå¹¶ä¸‹è½½');
                
            } catch (error) {
                console.error('ç”ŸæˆæŠ¥å‘Šå¤±è´¥:', error);
                showError('ç”ŸæˆæŠ¥å‘Šå¤±è´¥ï¼Œè¯·é‡è¯•');
            }
        }

        // å¯¼å‡ºæ•°æ®
        function exportData() {
            const data = [];
            
            // æ¨¡æ‹Ÿå†å²æ•°æ®
            for (let i = 0; i < 24; i++) {
                data.push({
                    æ—¶é—´: new Date(Date.now() - i * 60 * 60 * 1000).toLocaleString(),
                    æ¸©åº¦: (23 + Math.random() * 5).toFixed(1),
                    æ¹¿åº¦: (60 + Math.random() * 20).toFixed(1),
                    å…‰ç…§å¼ºåº¦: Math.floor(Math.random() * 50000),
                    åœŸå£¤æ¹¿åº¦: (50 + Math.random() * 20).toFixed(1),
                    CO2æµ“åº¦: Math.floor(400 + Math.random() * 400)
                });
            }
            
            const csv = convertToCSV(data);
            downloadCSV(csv, `environment_data_${new Date().toISOString().split('T')[0]}.csv`);
            showSuccess('ç¯å¢ƒæ•°æ®å·²å¯¼å‡?);
        }

        // æ˜¾ç¤ºè¶‹åŠ¿é¢„æµ‹
        function showPrediction() {
            const predictions = [
                'ğŸ“ˆ æ¸©åº¦è¶‹åŠ¿ï¼šæœªæ?4å°æ—¶æ¸©åº¦å°†ç¨³å®šåœ¨22-25Â°Cä¹‹é—´',
                'ğŸ’§ æ¹¿åº¦é¢„æµ‹ï¼šæ¹¿åº¦å°†åœ¨æ˜å¤©ä¸Šåˆç•¥æœ‰ä¸Šå?,
                'â˜€ï¸å…‰ç…§é¢„æµ‹ï¼šæ˜æ—¥å…‰ç…§å……è¶³ï¼Œå»ºè®®å‡å°‘è¡¥å…‰æ—¶é—?,
                'âš?èƒ½è€—é¢„æµ‹ï¼šä¼˜åŒ–æ§åˆ¶ç­–ç•¥åï¼Œèƒ½è€—å¯é™ä½10-15%',
                'ğŸŒ± ç”Ÿé•¿ç¯å¢ƒï¼šå½“å‰ç¯å¢ƒæ¡ä»¶è‰¯å¥½ï¼Œæœ‰åˆ©äºæ¤ç‰©ç”Ÿé•?
            ];
            
            const predictionText = predictions.join('\n\n');
            alert(`è¶‹åŠ¿é¢„æµ‹åˆ†æï¼š\n\n${predictionText}`);
        }

        // è½¬æ¢ä¸ºCSVæ ¼å¼
        function convertToCSV(data) {
            if (data.length === 0) return '';
            
            const headers = Object.keys(data[0]);
            const csvContent = [
                headers.join(','),
                ...data.map(row => headers.map(header => `"${row[header]}"`).join(','))
            ].join('\n');
            return csvContent;
        }

        // ä¸‹è½½CSVæ–‡ä»¶
        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // æ˜¾ç¤ºæ¶ˆæ¯å‡½æ•°
        function showLoading(message) {
            showMessage(message, '#17a2b8', '#d1ecf1');
        }

        function showSuccess(message) {
            showMessage(message, '#155724', '#d4edda');
        }

        function showError(message) {
            showMessage(message, '#721c24', '#f8d7da');
        }

        function showMessage(message, color, background) {
            const div = document.createElement('div');
            div.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${background};
                color: ${color};
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 1000;
                max-width: 300px;
            `;
            div.textContent = message;
            document.body.appendChild(div);
            
            setTimeout(() => {
                if (document.body.contains(div)) {
                    document.body.removeChild(div);
                }
            }, 3000);
        }
    </script>
</body>
</html><!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®åˆ†æ - æ™ºèƒ½æ¸©å®¤ç›‘æ§ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="css/components.css">
    <style>
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .nav {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .nav a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .nav a:hover, .nav a.active {
            background: rgba(255,255,255,0.2);
        }
        
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }
        
        .chart-placeholder {
            height: 250px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 14px;
            text-align: center;
            flex-direction: column;
        }
        
        .chart-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
        }
        
        .stat-change {
            font-size: 12px;
            margin-top: 5px;
        }
        
        .change-positive {
            color: #28a745;
        }
        
        .change-negative {
            color: #dc3545;
        }
        
        .temp-stat .stat-value { color: #FF6B6B; }
        .humidity-stat .stat-value { color: #4ECDC4; }
        .light-stat .stat-value { color: #FFE66D; }
        .efficiency-stat .stat-value { color: #A8E6CF; }
        
        .controls {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .control-row {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-group label {
            font-weight: 500;
            color: #333;
        }
        
        .control-group select,
        .control-group input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #4CAF50;
            color: white;
        }
        
        .btn-primary:hover {
            background: #45a049;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .report-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .report-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
        }
        
        .report-item:last-child {
            border-bottom: none;
        }
        
        .report-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .report-description {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .report-value {
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>æ•°æ®åˆ†æ</h1>
            <nav class="nav">
                <a href="/dashboard.html">è¿”å›é¦–é¡µ</a>
                <a href="environment.html">ç¯å¢ƒç›‘æ§</a>
                <a href="devices.html">è®¾å¤‡æ§åˆ¶</a>
                <a href="alerts.html">æŠ¥è­¦ç®¡ç†</a>
                <a href="analytics.html" class="active">æ•°æ®åˆ†æ</a>
            </nav>
        </header>

        <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
        <div class="stats-grid">
            <div class="stat-card temp-stat">
                <div class="stat-icon">ğŸŒ¡ï¸?/div>
                <div class="stat-value" id="avgTemp">23.5</div>
                <div class="stat-label">å¹³å‡æ¸©åº¦ (Â°C)</div>
                <div class="stat-change change-positive">â†?1.2Â°C è¾ƒæ˜¨æ—?/div>
            </div>
            
            <div class="stat-card humidity-stat">
                <div class="stat-icon">ğŸ’§</div>
                <div class="stat-value" id="avgHumidity">65.8</div>
                <div class="stat-label">å¹³å‡æ¹¿åº¦ (%)</div>
                <div class="stat-change change-negative">â†?2.3% è¾ƒæ˜¨æ—?/div>
            </div>
            
            <div class="stat-card light-stat">
                <div class="stat-icon">â˜€ï¸?/div>
                <div class="stat-value" id="avgLight">28.5</div>
                <div class="stat-label">å¹³å‡å…‰ç…§ (klux)</div>
                <div class="stat-change change-positive">â†?5.2% è¾ƒæ˜¨æ—?/div>
            </div>
            
            <div class="stat-card efficiency-stat">
                <div class="stat-icon">âš?/div>
                <div class="stat-value" id="efficiency">87.2</div>
                <div class="stat-label">ç³»ç»Ÿæ•ˆç‡ (%)</div>
                <div class="stat-change change-positive">â†?3.1% è¾ƒæ˜¨æ—?/div>
            </div>
        </div>

        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="controls">
            <h2 style="margin-bottom: 20px;">åˆ†ææ§åˆ¶</h2>
            <div class="control-row">
                <div class="control-group">
                    <label>æ—¶é—´èŒƒå›´:</label>
                    <select id="timeRange">
                        <option value="24h">æœ€è¿?4å°æ—¶</option>
                        <option value="7d">æœ€è¿?å¤?/option>
                        <option value="30d">æœ€è¿?0å¤?/option>
                        <option value="custom">è‡ªå®šä¹?/option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>æ•°æ®ç±»å‹:</label>
                    <select id="dataType">
                        <option value="all">å…¨éƒ¨æ•°æ®</option>
                        <option value="temperature">æ¸©åº¦</option>
                        <option value="humidity">æ¹¿åº¦</option>
                        <option value="light">å…‰ç…§</option>
                        <option value="soil">åœŸå£¤æ¹¿åº¦</option>
                        <option value="co2">CO2æµ“åº¦</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" onclick="updateAnalysis()">æ›´æ–°åˆ†æ</button>
                <button class="btn btn-secondary" onclick="exportReport()">å¯¼å‡ºæŠ¥å‘Š</button>
            </div>
        </div>

        <!-- å›¾è¡¨åŒºåŸŸ -->
        <div class="analytics-grid">
            <div class="chart-card">
                <div class="chart-title">ç¯å¢ƒå‚æ•°è¶‹åŠ¿</div>
                <div class="chart-placeholder">
                    <div class="chart-icon">ğŸ“ˆ</div>
                    <div>æ¸©åº¦ã€æ¹¿åº¦ã€å…‰ç…§ç­‰å‚æ•°çš„æ—¶é—´è¶‹åŠ¿å›¾</div>
                    <small>å›¾è¡¨åŠŸèƒ½å¼€å‘ä¸­...</small>
                </div>
            </div>
            
            <div class="chart-card">
                <div class="chart-title">è®¾å¤‡è¿è¡ŒçŠ¶æ€?/div>
                <div class="chart-placeholder">
                    <div class="chart-icon">âš™ï¸</div>
                    <div>è®¾å¤‡è¿è¡Œæ—¶é—´å’Œæ•ˆç‡ç»Ÿè®?/div>
                    <small>å›¾è¡¨åŠŸèƒ½å¼€å‘ä¸­...</small>
                </div>
            </div>
            
            <div class="chart-card">
                <div class="chart-title">èƒ½è€—åˆ†æ?/div>
                <div class="chart-placeholder">
                    <div class="chart-icon">ğŸ”‹</div>
                    <div>å„è®¾å¤‡èƒ½è€—åˆ†å¸ƒå’Œè¶‹åŠ¿</div>
                    <small>å›¾è¡¨åŠŸèƒ½å¼€å‘ä¸­...</small>
                </div>
            </div>
            
            <div class="chart-card">
                <div class="chart-title">æŠ¥è­¦ç»Ÿè®¡</div>
                <div class="chart-placeholder">
                    <div class="chart-icon">ğŸš¨</div>
                    <div>æŠ¥è­¦ç±»å‹å’Œé¢‘ç‡åˆ†æ?/div>
                    <small>å›¾è¡¨åŠŸèƒ½å¼€å‘ä¸­...</small>
                </div>
            </div>
        </div>

        <!-- åˆ†ææŠ¥å‘Š -->
        <div class="report-section">
            <h2 style="margin-bottom: 20px;">æ™ºèƒ½åˆ†ææŠ¥å‘Š</h2>
            
            <div class="report-item">
                <div class="report-title">æ¸©åº¦æ§åˆ¶æ•ˆæœ</div>
                <div class="report-description">
                    è¿‡å»24å°æ—¶å†…ï¼Œæ¸©åº¦æ§åˆ¶ç³»ç»Ÿè¡¨ç°è‰¯å¥½ï¼Œå¹³å‡æ¸©åº¦ä¿æŒåœ¨23.5Â°Cï¼?
                    åœ¨ç†æƒ³èŒƒå›´å†…(20-26Â°C)ã€‚æ¸©åº¦æ³¢åŠ¨å¹…åº¦ä¸ºÂ±1.8Â°Cï¼Œæ§åˆ¶ç²¾åº¦è¾ƒé«˜ã€?
                </div>
                <div class="report-value">æ§åˆ¶ç²¾åº¦: 92.3%</div>
            </div>
            
            <div class="report-item">
                <div class="report-title">æ¹¿åº¦ç®¡ç†åˆ†æ</div>
                <div class="report-description">
                    æ¹¿åº¦æ§åˆ¶ç³»ç»Ÿè¿è¡Œç¨³å®šï¼Œå¹³å‡æ¹¿åº?5.8%ï¼Œç¬¦åˆä½œç‰©ç”Ÿé•¿éœ€æ±‚ã€?
                    åŠ æ¹¿å™¨å’Œé™¤æ¹¿å™¨åè°ƒå·¥ä½œï¼Œæœ‰æ•ˆç»´æŒäº†æ¹¿åº¦å¹³è¡¡ã€?
                </div>
                <div class="report-value">æ¹¿åº¦ç¨³å®šæ€? 88.7%</div>
            </div>
            
            <div class="report-item">
                <div class="report-title">å…‰ç…§ä¼˜åŒ–å»ºè®®</div>
                <div class="report-description">
                    è¡¥å…‰ç³»ç»Ÿåœ¨é˜´å¤©æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œæœ‰æ•ˆè¡¥å……äº†è‡ªç„¶å…‰ç…§ä¸è¶³ã€?
                    å»ºè®®åœ¨ä¸Šå?0ç‚¹è‡³ä¸‹åˆ3ç‚¹æœŸé—´é€‚å½“è°ƒæ•´è¡¥å…‰å¼ºåº¦ï¼Œä»¥æé«˜å…‰èƒ½åˆ©ç”¨æ•ˆç‡ã€?
                </div>
                <div class="report-value">å…‰ç…§åˆ©ç”¨ç? 76.4%</div>
            </div>
            
            <div class="report-item">
                <div class="report-title">èƒ½è€—æ•ˆç‡è¯„ä¼?/div>
                <div class="report-description">
                    æ•´ä½“ç³»ç»Ÿèƒ½è€—æ§åˆ¶è‰¯å¥½ï¼Œè®¾å¤‡è¿è¡Œæ•ˆç‡è¾ƒé«˜ã€?
                    å»ºè®®ä¼˜åŒ–é£æ‰‡è¿è¡Œæ—¶é—´ï¼Œå¯è¿›ä¸€æ­¥é™ä½?-8%çš„èƒ½è€—ã€?
                </div>
                <div class="report-value">èŠ‚èƒ½æ½œåŠ›: 6.2%</div>
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateAnalysis();
            // æ¯?åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°ç»Ÿè®¡æ•°æ®
            setInterval(updateStats, 300000);
        });

        // æ›´æ–°åˆ†ææ•°æ®
        function updateAnalysis() {
            showLoading('æ­£åœ¨æ›´æ–°åˆ†ææ•°æ®...');
            
            // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
            setTimeout(() => {
                updateStats();
                showSuccess('åˆ†ææ•°æ®å·²æ›´æ–?);
            }, 1500);
        }

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            // æ¨¡æ‹Ÿæ•°æ®å˜åŒ–
            const stats = {
                avgTemp: (22 + Math.random() * 4).toFixed(1),
                avgHumidity: (60 + Math.random() * 20).toFixed(1),
                avgLight: (25 + Math.random() * 10).toFixed(1),
                efficiency: (85 + Math.random() * 10).toFixed(1)
            };
            
            document.getElementById('avgTemp').textContent = stats.avgTemp;
            document.getElementById('avgHumidity').textContent = stats.avgHumidity;
            document.getElementById('avgLight').textContent = stats.avgLight;
            document.getElementById('efficiency').textContent = stats.efficiency;
        }

        // å¯¼å‡ºæŠ¥å‘Š
        function exportReport() {
            showLoading('æ­£åœ¨ç”ŸæˆæŠ¥å‘Š...');
            
            setTimeout(() => {
                const reportData = {
                    ç”Ÿæˆæ—¶é—´: new Date().toLocaleString('zh-CN'),
                    åˆ†æå‘¨æœŸ: document.getElementById('timeRange').selectedOptions[0].text,
                    æ•°æ®ç±»å‹: document.getElementById('dataType').selectedOptions[0].text,
                    å¹³å‡æ¸©åº¦: document.getElementById('avgTemp').textContent + 'Â°C',
                    å¹³å‡æ¹¿åº¦: document.getElementById('avgHumidity').textContent + '%',
                    å¹³å‡å…‰ç…§: document.getElementById('avgLight').textContent + 'klux',
                    ç³»ç»Ÿæ•ˆç‡: document.getElementById('efficiency').textContent + '%',
                    æ¸©åº¦æ§åˆ¶ç²¾åº¦: '92.3%',
                    æ¹¿åº¦ç¨³å®šæ€? '88.7%',
                    å…‰ç…§åˆ©ç”¨ç? '76.4%',
                    èŠ‚èƒ½æ½œåŠ›: '6.2%'
                };
                
                const csv = Object.entries(reportData)
                    .map(([key, value]) => `"${key}","${value}"`)
                    .join('\n');
                
                downloadCSV('é¡¹ç›®,æ•°å€¼\n' + csv, 'analytics_report.csv');
                showSuccess('åˆ†ææŠ¥å‘Šå·²å¯¼å‡?);
            }, 2000);
        }

        // ä¸‹è½½CSVæ–‡ä»¶
        function downloadCSV(csv, filename) {
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // æ˜¾ç¤ºåŠ è½½æ¶ˆæ¯
        function showLoading(message) {
            showMessage(message, '#17a2b8', '#d1ecf1');
        }

        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        function showSuccess(message) {
            showMessage(message, '#155724', '#d4edda');
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message, color, background) {
            const div = document.createElement('div');
            div.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${background};
                color: ${color};
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                z-index: 1000;
                max-width: 300px;
            `;
            div.textContent = message;
            document.body.appendChild(div);
            
            setTimeout(() => {
                if (document.body.contains(div)) {
                    document.body.removeChild(div);
                }
            }, 3000);
        }
    </script>
</body>
</html>
